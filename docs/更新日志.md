<!-- path: docs/更新日志.md -->
# 更新日志

## v1.6.0
- 优化基础检索表单（`frontend/src/components/BasicSearchForm.jsx`）在移动端的栈式布局与按钮宽度，提交控件在窄屏保持整行显示并与勾选项保持间距。
- 调整高级检索表单（`frontend/src/components/AdvancedSearchForm.tsx`）的条件卡片为自适应间距，逻辑、模糊选项与操作按钮在小屏改为整行排列，避免控件拥挤。
- 更新搜索结果列表与卡片（`frontend/src/components/ResultsList.tsx`, `frontend/src/components/BookItem.tsx`）的响应式网格、留白与按钮宽度，使空状态和书籍卡片在手机与桌面均匀排布。
- 为检索结果页（`frontend/src/pages/ResultsPage.tsx`）补充横向内边距与排版断点，骨架屏与统计信息在不同屏幕尺寸下保持可读。

## v1.5.0
- 基础检索表单（`frontend/src/components/BasicSearchForm.jsx`）新增失焦校验、字段格式限制与错误提示文案，让用户在输入 ISBN 或出版时间时能即时获知格式问题并禁止提交空值。
- 高级检索表单（`frontend/src/components/AdvancedSearchForm.tsx`）为每条条件提供触发式校验、错误高亮与批量提示，移除空条件提交并统一错误提示语。
- 检索结果页（`frontend/src/pages/ResultsPage.tsx`）在网络或服务异常时同步弹出 toast 提示，与表单保持一致的反馈体验。

## v1.4.0
- 搜索结果为空时的提示框（`frontend/src/components/ResultsList.tsx`）加入图标、引导文案与返回按钮，让用户能够快速回到检索页或调整条件。

## v1.3.0
- 基础与高级检索按钮（`frontend/src/components/BasicSearchForm.jsx`, `frontend/src/components/AdvancedSearchForm.tsx`）新增加载状态与禁用逻辑，避免重复提交并在按钮中展示旋转动画反馈。
- 结果页（`frontend/src/pages/ResultsPage.tsx`）优化检索等待体验，使用进度提示与骨架屏占位展示加载过程。

## v1.2.0
- 访客检索体验焕新：`frontend/src/pages/SearchPage.jsx` 与 `frontend/src/components/SearchTabs.jsx` 组成的搜索卡片改用圆角白底与标签式导航，并强化按钮高亮。
- 基础与高级检索表单 (`frontend/src/components/BasicSearchForm.jsx`, `frontend/src/components/AdvancedSearchForm.tsx`) 统一采用 Tailwind 表单栅格与 `space-x` 排版，控件样式与主色调保持一致。
- 结果页与书籍卡片 (`frontend/src/pages/ResultsPage.tsx`, `frontend/src/components/ResultsList.tsx`, `frontend/src/components/BookItem.tsx`) 调整为宽松网格与响应式卡片，封面比例与标签胶囊视觉更加现代。
- 登录页 (`frontend/src/pages/LoginPage.jsx`) 升级为全屏灰底卡片布局，突出主操作并优化表单可读性。

## v1.1.0
- 在 `config.Config` 中新增 `adminPassword` 字段并暴露 `/api/v1/login` 与 `/api/v1/admin/*` 接口，后端启用 JWT 认证中间件保护完整配置读写，同时默认在所有数据源上执行搜索。
- 拆分设置接口：`GET /api/v1/settings` 仅返回公共参数，新增后台配置读写处理流程以在更新 `static/settings.json` 后自动刷新数据源与密钥。
- 前端移除侧边栏与关于页，精简 Zustand 全局状态，新增登录页与后台管理页，基于令牌守卫 `/admin` 路由并通过页面形式管理数据源与系统设置。

## v1.0.0
- 在 `frontend/` 引入 Tailwind CSS 与 `@tailwindcss/forms` 插件，重建全局样式管线并以 `primary` 主题色统一交互控件的视觉语言。
- 重构布局组件：采用响应式侧边栏与顶部工具栏，使用 Heroicons 替换旧有字符图标，设置面板与关于页同步升级为现代化弹窗与选项卡布局。
- 更新检索流程：主页搜索卡片、基础/高级表单、分页与结果卡片全面迁移至 Tailwind 样式，搜索结果改为卡片网格展示并优化下载按钮与标签呈现。

## v0.9.0
- 重构配置体系，在 `static/settings.json` 中新增 `datasources` 数组，支持为多种书库类型集中配置名称、类型与路径。
- 新增 `database/datasource.go` 定义统一的书籍模型与数据源接口，实现 `calibre`、`legacy_db` 两种适配器，并在 `main.go` 聚合搜索结果、提供封面与下载接口。
- 更新前端：改写 `Book` 类型与 `ResultsPage` 展示逻辑，移除秒传复制工具，新增封面/标签/来源展示与下载按钮。
- 调整设置面板为“数据源管理”，支持增删改数据源条目并同步后端配置。

## v0.8.4
- 更新 `Dockerfile`，前端构建阶段改用 `node:22-alpine`，满足 Vite 对 Node.js 20.19+ 的要求。
- 将 Go 构建阶段升级至 `golang:1.23-alpine` 并显式启用 `GOTOOLCHAIN=auto`，以兼容 `go.mod` 对 Go 1.23+ 与工具链 1.24 的需求。

## v0.8.3
- 更新 `.github/workflows/deploy.yml`，登录步骤改为使用 GitHub Container Registry 并推送至 `ghcr.io`，避免 Docker Hub 凭据缺失导致的自动化失败。

## v0.8.2
- 引入 `react-hot-toast`，在 `frontend/src/components/Layout.jsx` 挂载 `Toaster` 并替换全局的 `window.alert` 交互，优化复制、搜索与分页等场景的提示体验。
- 抽离 `frontend/src/utils/filename.ts` 与 `frontend/src/utils/format.ts`，分别复用文件名去重与文件大小格式化逻辑，精简 `CopyTools`、`BookItem` 等组件。
- 将 `frontend/src/components/CopyTools.tsx` 迁移至 TypeScript，配合 `useReducer` 重构的 `frontend/src/components/AdvancedSearchForm.tsx`，统一复杂状态管理并减少副作用。

## v0.8.1
- 清理 README 及多语言说明文档，移除已废弃的 FastAPI/Python 部署指引，改写为 Go + React 架构的使用说明。
- 审视仓库确认不存在遗留 Python 源码，并补充当前构建与调试建议，保持文档与实现一致。

## v0.8.0
- 新增 TypeScript 类型目录 `frontend/src/types/Book.ts` 与 `frontend/src/types/Settings.ts`，同步后端模型与配置结构。
- 将 `frontend` 中的全局状态管理与检索相关组件迁移至 TypeScript，增强类型约束并复用核心类型。
- 引入 `frontend/tsconfig.json` 与 `typescript` 开发依赖，确保 Vite 构建流程支持 TS 代码。

## v0.7.1
- 移除仓库中的 `.ico` 图标文件，并改用 SVG 版本以减少冗余静态资源。
- 更新 `frontend/index.html` 与 `main.go`，使前端与后端引用新的 SVG 图标路径。

## v0.7.0
- 新增前端目录 `frontend/`（Vite + React），实现首页、检索结果页与关于页组件化迁移。
- 合并旧有样式至 `frontend/src/assets/styles/main.css`，并引入 Zustand、React Router 与二维码生成依赖。
- 调整 `main.go` 静态资源路由，返回 `/api/v1/available-dbs`、`/api/v1/settings` 等新结构，支持 React SPA。
- 替换 Dockerfile 为多阶段构建，新增 `.github/workflows/deploy.yml` 以自动构建并推送镜像。
- 清理 Python 版遗留文件（`app.py`、`module/`、`templates/` 等），正式切换至 Go + React 实现。

## v0.6.0
- 在 `main.go` 中新增静态资源托管逻辑，通过 `router.Static` 服务 React 构建资源。
- 为单页应用配置根路径和兜底路由，确保刷新任意前端路由时返回 `static/index.html`。

## v0.5.0
- 新增主程序入口 `main.go`，基于 Gin 提供搜索、数据库列表、设置、关于内容与二维码接口。
- 拓展数据库管理器 `database/manager.go`，支持数据库列表读取与并发计数查询，并补充相关测试。
- 新增网络工具 `utils/net.go` 获取本地 IP，更新文档以记录版本变更。

## v0.4.0
- 新增高级查询构建器 `search/builder.go`，使用参数化 SQL 和 strings.Builder 复刻 Python 搜索逻辑。
- 新增单元测试 `search/builder_test.go`，覆盖模糊查询、逻辑组合与异常分支。

## v0.3.0
- 新增数据模型 `models/book.go`，映射 `books` 表字段并提供列到结构体的写入工具。
- 新增数据库管理器 `database/manager.go`，扫描 `instance` 目录并发起多数据库并发查询。
- 为数据库管理模块编写测试 `database/manager_test.go`，覆盖并发查询与错误聚合的关键路径。

## v0.2.0
- 新增配置模块 `config/config.go`，支持通过 Viper 加载 `static/settings.json` 并输出结构化配置。
- 新增日志模块 `logger/logger.go`，基于 Lumberjack 配置日志轮转并将 Go slog 设置为默认结构化日志记录器。

## v0.1.0
- 初始化 Go 模块 `ebookdatabase`。
- 配置核心依赖：Gin、SQLite 驱动、Viper、Lumberjack 与 Gin CORS 中间件。

